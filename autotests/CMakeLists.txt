# vim:set softtabstop=3 shiftwidth=3 tabstop=3 expandtab:
project (PlasmaActivitiesStatsAutotests)

find_package (Qt6 REQUIRED NO_MODULE COMPONENTS Test Core DBus Sql)

if (NOT WIN32)

add_executable(PlasmaActivitiesStatsTest)

target_include_directories(PlasmaActivitiesStatsTest PRIVATE
   ${KASTATS_CURRENT_ROOT_SOURCE_DIR}/src
   ${KASTATS_CURRENT_ROOT_SOURCE_DIR}/autotests
   ${CMAKE_BINARY_DIR}/src
)

target_sources(PlasmaActivitiesStatsTest PRIVATE
   main.cpp
   QueryTest.cpp
   ResultSetTest.cpp
   ResultSetQuickCheckTest.cpp
   ResultWatcherTest.cpp

   # Generated by macro ecm_qt_declare_logging_category in src/CMakeLists.txt
   ${CMAKE_BINARY_DIR}/src/plasma-activities-stats-logsettings.cpp

   ${KASTATS_CURRENT_ROOT_SOURCE_DIR}/src/utils/qsqlquery_iterator.cpp
   ${KASTATS_CURRENT_ROOT_SOURCE_DIR}/src/common/database/Database.cpp
   ${KASTATS_CURRENT_ROOT_SOURCE_DIR}/src/common/database/schema/ResourcesDatabaseSchema.cpp
   ${KASTATS_CURRENT_ROOT_SOURCE_DIR}/autotests/common/test.cpp
)

target_link_libraries(PlasmaActivitiesStatsTest
   PRIVATE
      Boost::boost

      Qt6::Core
      Qt6::Test
      Qt6::DBus
      Qt6::Sql

      Plasma::Activities
      Plasma::ActivitiesStats
)

endif ()
